{% extends "base.twig" %}
{% block head %}
{% endblock %}
{% block content %}
<div class="d-flex justify-content-center">
	<div class="card border-top-0 rounded-bottom border shadow w-75">
		<div class="card-header d-flex justify-content-between bg-mycolor">
			<div class="row">
				<h5 class="card-title mt-2 ml-2">Socios</h5>
			</div>
			{% if responseSocio.result == 2 %}
			<button id="{{ responseSocio.socio.idSocio }}" type="button" class="btn btn-dark mt-2" onclick="openModalUpdateSocio(this)"><i class="fas fa-user-edit"></i></button>
			{% endif %}
		</div>
		<div class="card-body">
			{% if responseSocio.result == 2 %}
			<h6 class="card-subtitle mb-3 text-muted">Información del socio</h6>
			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="inputNombre">Nombre</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputNombre" value="{{ responseSocio.socio.nombre }}">
					</div>
				</div>
				<div class="col-2">
					<div class="form-group">
						<label for="inputCedula">Cédula</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputCedula" value="{{ responseSocio.socio.cedula }}">
					</div>
				</div>
				<div class="col-2">
					<div class="form-group">
						<label for="inputTelefono">Teléfono</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputTelefono" value="{{ responseSocio.socio.telefono }}">
					</div>
				</div>
				<div class="col-2">
					<div class="form-group">
						<label for="selectTipoSocio">Tipo de socio</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="selectTipoSocio" value="{{ responseSocio.socio.tipo }}">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="inputDireccion">Dirección</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputDireccion" value="{{ responseSocio.socio.direccion }}">
					</div>
				</div>
				<div class="col">
					<div class="form-group">
						<label for="inputEmail">Email</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputEmail" value="{{ responseSocio.socio.email }}">
					</div>
				</div>
			</div>
			<hr>
			<div class="col-md-4 mb-3">

			</div>
			<h6 class="card-subtitle mb-3 text-muted">Información de pago</h6>
			<div class="row">
				<div class="col">
					<label for="inputCuota">Cuota</label>
					<div class="input-group">
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputCuota" value="{{ responseSocio.socio.cuota }}">
						<div class="input-group-prepend">
							<button class="btn btn-success shadow-sm" onclick="calculateQuotaSocio('{{ responseSocio.socio.idSocio }}')"><i class="fas fa-sync-alt"></i></button>
						</div>
					</div>
				</div>
				<div class="col">
					<div class="form-group">
						<label for="inputFechaPago">Fecha pago</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputFechaPago" value="{{ responseSocio.socio.fechaPago }}">
					</div>
				</div>
				<div class="col">
					<div class="form-group">
						<label for="inputUltimoPago">Último pago</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputUltimoPago" value="{{ responseSocio.socio.fechaUltimoPago }}">
					</div>
				</div>
				<div class="col">
					<div class="form-group">
						<label for="inputUltimoMesPago">Último mes pago</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputUltimoMesPago" value="{{ responseSocio.socio.fechaUltimaCuota }}">
					</div>
				</div>
				<div class="col">
					<div class="form-group">
						<label for="inputLugarPago">Lugar de pago</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputLugarPago" value="{{ responseSocio.socio.lugarPago }}">
					</div>
				</div>
			</div>
			<hr>
			<h6 class="card-subtitle mb-3 text-muted">Información adicional</h6>
			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="inputFechaIngreso">Fecha ingreso</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputFechaIngreso" value="{{ responseSocio.socio.fechaIngreso }}">
					</div>
				</div>
				<div class="col">
					<div class="form-group">
						<label for="inputRut">RUT</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputRut" value="{{ responseSocio.socio.rut }}">
					</div>
				</div>
				<div class="col">
					<div class="form-group">
						<label for="inputTelefax">Telefax</label>
						<input type="text" class="form-control text-center shadow-sm" readonly id="inputTelefax" value="{{ responseSocio.socio.telefax }}">
					</div>
				</div>
			</div>
			{% endif %}
			{% if responseSocio.mascotas.result == 2%}
			<hr>
			<h6 class="card-subtitle mb-3 text-muted">Mascotas</h6>
			<div class="d-flex justify-content-center">
				<table class="table table-sm">
					<thead class="bg-mycolor">
						<tr>
							<td class="text-center" scope="col">Nombre</td>
							<td class="text-center"abbr="" scope="col">Raza</td>
							<td class="text-center" scope="col">Especie</td>
							<td class="text-center" scope="col">Sexo</td>
							<td class="text-center" scope="col">Nacimiento</td>
							<td class="text-center" scope="col">Estado</td>
						</tr>
					</thead>
					<tbody id="tbodyMascotasSocio">
						{% for mascota in responseSocio.mascotas.listMascotas %}
						<tr href="{{ path_for('verMascota', {idMascota: mascota.idMascota, desde: 'VerSocio'}) }}">
							<td class="text-center">{{ mascota.nombre }}</td>
							<td class="text-center">{{ mascota.raza }}</td>
							<td class="text-center">{{ mascota.especie }}</td>
							{% if mascota.sexo == 0 %}
							<td class="text-center">Hembra</td>
							{% else %}
							<td class="text-center">Macho</td>
							{% endif %}
							<td class="text-center">{{ mascota.fechaNacimiento }}</td>
							<td class="text-center">
								{% if mascota.estado == 0 %}
								Inactiva
								{% elseif mascota.estado == 1 %}
								Activa
								{% else %}
								Pendiente
								{% endif %}
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			{% endif %}
		</div>
	</div>
</div>

<div class="modal fade" id="modalUpdateSocio" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header bg-mycolor">
				<h5 class="modal-title" id="exampleModalLongTitle">Modificar socio</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<h6 class="card-subtitle mb-3 text-muted">Información del socio</h6>
				<div class="row">
					<div class="col-3">
						<div class="form-group">
							<label for="inputCedula">Cédula</label>
							<input type="number" class="form-control text-center shadow-sm" id="inputModalCedula" onkeypress="return keyEnterPress(event, this.value, 8)">
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							<label for="inputNombre">Nombre</label>
							<input type="text" class="form-control text-center shadow-sm"  id="inputModalNombre" onkeypress="return keyEnterPress(event, null, null)">
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-3">
						<div class="form-group">
							<label for="inputTelefono">Teléfono</label>
							<input type="number" class="form-control text-center shadow-sm" id="inputModalTelefono" onkeypress="return keyEnterPress(event, this.value, 10)">
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							<label for="inputDireccion">Dirección</label>
							<input type="text" class="form-control text-center shadow-sm" id="inputModalDireccion" onkeypress="return keyEnterPress(event, null, null)">
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-3">
						<div class="form-group">
							<label for="selectTipoSocio">Tipo socio</label>
							<select class="form-select form-control shadow-sm" id="selectModalTipoSocio" onkeypress="return keyEnterPress(event, null, null)">
								<option value="0">No socio</option>
								<option value="1">Socio</option>
								<option value="2">ONG</option>
							</select>
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							<label for="inputModalEmail">Email</label>
							<input type="text" class="form-control text-center shadow-sm" id="inputModalEmail" onkeypress="return keyEnterPress(event, null, null)">
						</div>
					</div>
				</div>
				<hr>
				<h6 class="card-subtitle mb-3 text-muted">Información de pago</h6>
				<div class="row">
					<div class="col">
						<div class="form-group">
							<label for="inputFechaPago">Fecha pago</label>
							<input type="number" class="form-control text-center shadow-sm"  id="inputModalFechaPago" onkeypress="return keyEnterPress(event, this.value, 2)">
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							<label for="inputUltimoPago">Último pago</label>
							<input type="date" class="form-control text-center shadow-sm"id="inputModalUltimoPago" onkeypress="return keyEnterPress(event, null, null)">
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							<label for="inputLugarPago">Lugar de pago</label>
							<select class="form-select form-control shadow-sm" id="selectLugarPago" onkeypress="return keyEnterPress(event, null, null)">
								<option value="0">Veterinaria</option>
								<option value="1">Cobrador</option>
							</select>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<div class="form-group">
							<label for="inputUltimoMesPago">Último mes pago</label>
							<input type="month" class="form-control text-center shadow-sm"  id="inputModalUltimoMesPago" onkeypress="return keyEnterPress(event, null, null)">
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							<label for="inputFechaIngreso">Fecha ingreso</label>
							<input type="date" class="form-control text-center shadow-sm" id="inputModalFechaIngreso" onkeypress="return keyEnterPress(event, null, null)">
						</div>
					</div>
				</div>
				<hr>
				<div class="row">
					<div class="col-4">
						<div class="form-group">
							<label for="inputRut">RUT</label>
							<input type="number" class="form-control text-center shadow-sm"  id="inputModalRut" onkeypress="return keyEnterPress(event, null, null)">
						</div>
					</div>
					<div class="col-8">
						<div class="form-group">
							<label for="inputTelefax">Telefax</label>
							<input type="text" class="form-control text-center shadow-sm"  id="inputModalTelefax" onkeypress="return keyEnterPress(event, null, null)">
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer d-flex justify-content-between">
				<button type="button" class="btn btn-danger shadow-sm" data-dismiss="modal">Cerrar</button>
				<button id="btnConfirmChange" type="button" name="{{ responseSocio.socio.idSocio }}" class="btn btn-success shadow-sm" onclick="saveChangeSocio(this)" onkeypress="return keyEnterPress(event, null, null)">Guardar</button>
			</div>
		</div>
	</div>
</div>
{%block script%}
<script type="text/javascript" src="{{path_for('Inicio')}}scripts/utils/showReplyMessage.js"></script>
<script type="text/javascript" src="{{path_for('Inicio')}}scripts/utils/sendPost.js"></script>
<script type="text/javascript" src="{{path_for('Inicio')}}scripts/utils/utils.js"></script>
<script type="text/javascript" src="{{path_for('Inicio')}}scripts/verSocio.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$('table tr').click(function(){
			window.location = $(this).attr('href');
			return false;
		});
	});
</script>
{% endblock %}
{% endblock %}