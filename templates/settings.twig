{% extends "base.twig" %}
{% block head %}
{% endblock %}
{% block content %}
<div class="d-flex justify-content-center">
	<div class="row">
		<div class="col">
			<div id="containerNuevoSocio" class="card">
				<h5 class="card-header" style="background: #85B58A">Configuraciones</h5>
				<div class="card-body">
					{% if administrador.usuario == 'admin' %}
					<h6 class="card-subtitle mb-2 text-muted">Administracion de cuentas de usuario</h6>
					<nav>
						<div class="nav nav-tabs" id="nav-tab" role="tablist">
							<a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-vacunas" role="tab" aria-controls="nav-home" aria-selected="true">Administrador</a>
							<a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-enfermedades" role="tab" aria-controls="nav-profile" aria-selected="false">Usuarios</a>
						</div>
					</nav>
					<div class="tab-content" id="nav-tabContent">
						<div class="tab-pane fade show active" id="nav-vacunas" role="tabpanel" aria-labelledby="nav-home-tab">
							<div class="card">
								<div class="card-body">
									<ul class="list-group list-group-flush">
										<li class="list-group-item">
											<div class="row">
												<div class="col">
													<div class="input-group mb-3">
														<span class="input-group-text" id="inputGroup-sizing-default">Nombre usuario</span>
														{% if administrador.usuario  == 'admin' %}
														<input type="text" class="form-control text-center" value="{{ administrador.usuario }}" readonly>
														{% else %}
														<input type="text" class="form-control text-center" value="{{ administrador.usuario }}">
														{% endif %}
													</div>
												</div>
											</div>
										</li>
										<li class="list-group-item">
											<div class="row">
												<div class="col">
													<div class="input-group mb-3">
														<span class="input-group-text" id="inputGroup-sizing-default">Contraseña actual</span>
														<input id="inpPassActual" type="password" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
													</div>
													<div class="input-group mb-3">
														<span class="input-group-text" id="inputGroup-sizing-default">Nueva contraseña</span>
														<input id="inpPass1" type="password" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
													</div>
													<div class="input-group mb-3">
														<span class="input-group-text" id="inputGroup-sizing-default">Repetir contraseña</span>
														<input id="inpPass2" type="password" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
													</div>
												</div>
											</div>
											<div class="d-flex justify-content-center">
												<button class="btn btn-success" data-toggle="modal" data-target="#modalModificarPass" >Modificar contraseña</button>
											</div>
										</li>
									</ul>
								</div>
							</div>
						</div>
						<div class="tab-pane fade" id="nav-enfermedades" role="tabpanel" aria-labelledby="nav-profile-tab">
							<div class="card">
								<div class="card-body">
									<div class="row">
										<div class="col-5">
											<table class="table table-sm table-striped table-bordered">
												<thead class="thead-dark">
													<tr>
														<th class="text-center" scope="col">Usuario</th>
														<th class="text-center" scope="col">Ver</th>
														<th class="text-center" scope="col">Modificar</th>
													</tr>
												</thead>
												<tbody>
													{% for usuario in usuarios %}
													<tr>
														<td class="text-center">{{ usuario.nombre }}</td>
														<td class="text-center">
															<button class="btn btn-info btn-sm">
																<a style="color: white;" href="{{path_for('Inicio')}}verHistorialUsuario/{{ usuario.idUsuario }}"><i class="fas fa-eye"></i></a>
															</button>
														</td>
														<td class="text-center">
															<button class="btn btn-info btn-sm" id="{{ usuario.idUsuario }}" onclick="selectUsuarioModificar(this)">
																<i class="fas fa-edit"></i>
															</button>
														</td>
													</tr>
													{% endfor %}
												</tbody>
											</table>
										</div>
										<div class="col-6">
											<h6 id="titleNuevoUsuario" class="card-subtitle mb-2 text-muted">Ingresar nuevo usuario</h6>
											<div class="input-group mb-3">
												<span class="input-group-text" id="inputGroup-sizing-default">Cuenta</span>
												<input id="cuentaUsuario" type="text" class="form-control text-center">
											</div>
											<div class="input-group mb-3">
												<span class="input-group-text" id="inputGroup-sizing-default">Email</span>
												<input id="emailUsuario" type="text" class="form-control text-center">
											</div>
											<div id="contenedorButtons" class="d-flex justify-content-center">
												<button id="btnCancelarUsuario" class="btn btn-danger" style="display: none;">Cancelar</button>
												<button id="btnNuevoUsuario" class="btn btn-success" onclick="filtrarOperacion(this)">Agregar usuario</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<ul class="list-group list-group-flush">
					<li class="list-group-item">
						<h6 class="card-subtitle mb-2 text-muted">Configuración de cuota por cantidad de mascotas</h6>
						<div class="row">
							<div class="col-sm">
								<div class="input-group mb-3">
									<span class="input-group-text" id="inputGroup-sizing-default">Una ($)</span>
									<input id="inpCuotaUna" type="number" pattern="/^-?\d+\.?\d*$/" onKeyPress="if(this.value.length== 5) return false;" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" value="{{ cuotas.cuotaUno }}">
								</div>
							</div>
							<div class="col-sm">
								<div class="input-group mb-3">
									<span class="input-group-text" id="inputGroup-sizing-default">Dos ($)</span>
									<input id="inpCuotaDos" type="number" pattern="/^-?\d+\.?\d*$/" onKeyPress="if(this.value.length== 5) return false;" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" value="{{ cuotas.cuotaDos}}">
								</div>
							</div>
							<div class="col-sm">
								<div class="input-group mb-3">
									<span class="input-group-text" id="inputGroup-sizing-default">Extra ($)</span>
									<input id="inpCuotaExtra" type="number" pattern="/^-?\d+\.?\d*$/" onKeyPress="if(this.value.length== 5) return false;" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" value="{{ cuotas.cuotaExtra }}">
								</div>
							</div>
						</div>
						<div class="d-flex justify-content-center">
							<button class="btn btn-success" data-toggle="modal" data-target="#modalFijarCuota">Fijar nueva cuota</button>
						</div>
					</li>
					<li class="list-group-item">
						<h6 class="card-subtitle mb-2 text-muted">Tiempo para inactividad automatica</h6>
						<div class="row">
							<div class="col-sm-7">
								<div class="input-group mb-3">
									<span class="input-group-text" id="inputGroup-sizing-default">Cantidad de dias antes de marcar socio inactivo</span>
									<input id="inpPlazoDeuda" type="number" pattern="/^-?\d+\.?\d*$/" onKeyPress="if(this.value.length== 5) return false;" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" value="{{ cuotas.plazoDeuda }}">
								</div>
							</div>
						</div>
						<div class="d-flex justify-content-center">
							<button class="btn btn-success" onclick="fijarPlazoDeuda()">Fijar plazo</button>
						</div>
					</li>
				</ul>
				{% else %}
				<div class="input-group mb-3">
					<span class="input-group-text" id="inputGroup-sizing-default">Nombre usuario</span>
					<input type="text" class="form-control text-center" value="{{ administrador.usuario }}" readonly>
				</div>
				<h6 class="card-subtitle mb-2 text-muted">Modificar contraseña administrador</h6>
				<div class="row">
					<div class="col">
						<div class="input-group mb-3">
							<span class="input-group-text" id="inputGroup-sizing-default">Contraseña actual</span>
							<input id="inpPassActual" type="password" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
						</div>
						<div class="input-group mb-3">
							<span class="input-group-text" id="inputGroup-sizing-default">Nueva contraseña</span>
							<input id="inpPass1" type="password" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
						</div>
						<div class="input-group mb-3">
							<span class="input-group-text" id="inputGroup-sizing-default">Repetir contraseña</span>
							<input id="inpPass2" type="password" class="form-control text-center" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
						</div>
					</div>
				</div>
				<div class="d-flex justify-content-center">
					<button class="btn btn-success" data-toggle="modal" data-target="#modalModificarPass" >Modificar contraseña</button>
				</div>
				{% endif %}
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="modalFijarCuota" tabindex="-1" role="dialog"  aria-labelledby="exampleModalCenterTitle" aria-hidden="true" >
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header alert-success" >
				<h5 class="modal-title" id="exampleModalLongTitle">Modificar cuota socio</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p class="text-justify">¿Desea fijar los montos ingresados para calcular las cuotas de los socios?. Esto generará una modificación en las cuotas de todos los socios activos</p>
			</div>
			<div class="modal-footer">
				<button class="btn btn-danger" data-dismiss="modal" >Cancelar</button>
				<button class="btn btn-success" id="btnNuevaMascota" onclick="fijarCostoCuota()">Confirmar</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="modalModificarPass" tabindex="-1" role="dialog"  aria-labelledby="exampleModalCenterTitle" aria-hidden="true" >
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header alert-success" >
				<h5 class="modal-title" id="exampleModalLongTitle ">Modificar contraseña administrador</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p class="text-center">¿Desea modificar la contraseña del administrador?</p>
			</div>
			<div class="modal-footer">
				<button class="btn btn-danger" data-dismiss="modal" >Cancelar</button>
				<button class="btn btn-success" id="btnNuevaMascota" onclick="fijarPassAdministrador()">Confirmar</button>
			</div>
		</div>
	</div>
</div>
{%block script%}
<script type="text/javascript" src="{{path_for('Inicio')}}scripts/settings.js"></script>
{% endblock %}
{% endblock %}